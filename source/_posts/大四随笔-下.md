---
title: 大四随笔(下)
date: 2020-01-04 08:53:32
tags: [[心情, 感想]
categories: [essay]
---

大四(实习)生活下篇


<!-- more -->


## 更新

------

### [2020-1-4]

- Initial release

## 2020-1-4

------

💦今日实习任务概览💦:

- 头铁主公玩家站

### 头铁主公

#### 1. 今日踩坑

> \[css]: 父级设置 `display: -webkit-box` 导致子元素高度塌陷的问题

**解决方式**: 子元素设置绝对定位, 形成 BFC, 脱离文档流即可

> \[微信浏览器]: vue-router 导致微信浏览器出现白条后, 遮挡页面(`单屏页面`)内容

**需求背景**: 之前遇到了很多次这样的情况, 真的想吐槽一下微信的设计. 我的需求是一个单屏玩家站页面, 里面的页面使用 vue-router 加以路由分发, 并且内容的高度是自适应的.

**问题描述**: 当我点击 router-link 跳转时, 微信浏览器底部的导航条遮挡住了页面的内容部分, 严重影响用户体验.

**解决办法**: 经过一番摸索, 通过监听路由变化, 动态更新整个应用的高度, 因为内容的高度是通过 `display: -webkit-box` 来自适应的.

```js
export default {
  watch: {
    $route() {
      this.$el.style.cssText += `
        height: ${window.innerHeight}px;
      `;
    },
  },
};
```

#### 2. 今日知识点

> \[vue-router]: 通过 GET 形式传参

```js
export default {
  mounted() {
    const groupId = 100;
    const postId = 100.1;

    this.$router.push({
      path: `/detail${groupId}`,
      query: {
        postId: postId,
      },
    });
  },
};
```

> \[less]: less 循环

```html
<div class="loading-list">
  <li class="loading-item"></li>
  <li class="loading-item"></li>
  <li class="loading-item"></li>
  <li class="loading-item"></li>
  <li class="loading-item"></li>
</div>
```

```less
@LOADING_ITEM_TOTAL: 5;

.loading-item-loop(@i) when (@i < @LOADING_ITEM_TOTAL) {
  width: 100px;
  height: 100px;

  &:nth-of-type(@{i}) {
    transform: rotate(@i * 30deg);
  }

  .loading-item-loop(@i + 1);
}

# 调用
.loading-item {
  .loading-item-loop(1);
}
```

#### 3. 今日 CHANGELOG

http://git.3k.com/web/PM/hw-20200102-ttzg-wjz/blob/develop/CHANGELOG.md